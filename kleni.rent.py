import streamlit as st

def main():
    st.set_page_config(page_title="Ελάχιστο Ενοίκιο για 10k", layout="wide")
    st.title("Υπολογιστής Ελάχιστου Ενοικίου για Συνολικό Εισόδημα 10.000€")

    st.sidebar.header("Παράμετροι Ενοικίασης")

    # ----- Εισαγωγή δεδομένων για τις διάφορες περιόδους -----
    # 1. Γιορτές
    st.sidebar.subheader("Γιορτές")
    μερες_πασχα = st.sidebar.slider("Μέρες το Πάσχα ανά έτος:", 0, 30, 10, 1)
    τιμη_πασχα = st.sidebar.slider("Αρχική Τιμή Πάσχα (€ ανά μέρα):", 10.0, 500.0, 100.0, 1.0)

    μερες_χριστουγεννα = st.sidebar.slider("Μέρες τα Χριστούγεννα ανά έτος:", 0, 30, 10, 1)
    τιμη_χριστουγεννα = st.sidebar.slider("Αρχική Τιμή Χριστούγεννα (€ ανά μέρα):", 10.0, 500.0, 120.0, 1.0)

    μερες_λοιπες_γιορτες = st.sidebar.slider("Μέρες Άλλες Γιορτές ανά έτος:", 0, 60, 20, 1)
    τιμη_λοιπες_γιορτες = st.sidebar.slider("Αρχική Τιμή Άλλες Γιορτές (€ ανά μέρα):", 10.0, 500.0, 90.0, 1.0)

    # 2. Καλοκαίρι
    st.sidebar.subheader("Καλοκαίρι")
    μερες_καλοκαιρι = st.sidebar.slider("Μέρες Καλοκαίρι ανά έτος:", 0, 180, 90, 1)
    τιμη_καλοκαιρι = st.sidebar.slider("Αρχική Τιμή Καλοκαίρι (€ ανά μέρα):", 10.0, 500.0, 80.0, 1.0)

    # 3. Κανονικές περίοδοι
    st.sidebar.subheader("Κανονικές Περιόδοι")
    # Υπολογίζουμε πόσες μέρες απομένουν για τις κανονικές περιόδους.
    συνολικες_γιορτες = μερες_πασχα + μερες_χριστουγεννα + μερες_λοιπες_γιορτες
    συνολικες_καλοκαιρι = μερες_καλοκαιρι
    συνολικες_κανονικες = 365 - (συνολικες_γιορτες + συνολικες_καλοκαιρι)
    if συνολικες_κανονικες < 0:
        συνολικες_κανονικες = 0  # Δεν μπορούμε να έχουμε αρνητικές μέρες

    τιμη_κανονικες = st.sidebar.slider("Αρχική Τιμή Κανονικές Περίοδοι (€ ανά μέρα):", 10.0, 300.0, 50.0, 1.0)

    # ----- 1. Υπολογισμός "αρχικού" ετήσιου εισοδήματος -----
    εισοδημα_πασχα = μερες_πασχα * τιμη_πασχα
    εισοδημα_χριστουγεννα = μερες_χριστουγεννα * τιμη_χριστουγεννα
    εισοδημα_λοιπες_γιορτες = μερες_λοιπες_γιορτες * τιμη_λοιπες_γιορτες
    εισοδημα_καλοκαιρι = μερες_καλοκαιρι * τιμη_καλοκαιρι
    εισοδημα_κανονικες = συνολικες_κανονικες * τιμη_κανονικες

    αρχικο_εισοδημα = εισοδημα_πασχα + εισοδημα_χριστουγεννα + εισοδημα_λοιπες_γιορτες + εισοδημα_καλοκαιρι + εισοδημα_κανονικες

    # ----- 2. Βρίσκουμε τον "scale factor" -----
    # Θέλουμε το ΝΕΟ συνολικό εισόδημα (ανά έτος) = 10.000€
    # Αν αρχικο_εισοδημα = 0 (π.χ. ο χρήστης έχει βάλει μηδέν παντού), ορίζουμε scale=0
    target = 10000.0  # Στόχος για ένα έτος
    if αρχικο_εισοδημα > 0:
        scale = target / αρχικο_εισοδημα
    else:
        scale = 0  # Αν αρχικο_εισοδημα == 0, όλα θα μείνουν μηδέν

    # ----- 3. Νέες τιμές (κλιμακωμένες) για να βγάλουμε ΣΥΝΟΛΟ 10.000€ -----
    # Θα κρατήσουμε επιπλέον δεκαδικά εσωτερικά, αλλά θα εμφανίσουμε 2 δεκαδικά στις κάρτες.
    νεα_τιμη_πασχα = τιμη_πασχα * scale
    νεα_τιμη_χριστουγεννα = τιμη_χριστουγεννα * scale
    νεα_τιμη_λοιπες_γιορτες = τιμη_λοιπες_γιορτες * scale
    νεα_τιμη_καλοκαιρι = τιμη_καλοκαιρι * scale
    νεα_τιμη_κανονικες = τιμη_κανονικες * scale

    # ----- 4. Υπολογίζουμε το ΕΤΗΣΙΟ εισόδημα με τις ΝΕΕΣ τιμές -----
    νεο_εισοδημα_πασχα = μερες_πασχα * νεα_τιμη_πασχα
    νεο_εισοδημα_χριστουγεννα = μερες_χριστουγεννα * νεα_τιμη_χριστουγεννα
    νεο_εισοδημα_λοιπες_γιορτες = μερες_λοιπες_γιορτες * νεα_τιμη_λοιπες_γιορτες
    νεο_εισοδημα_καλοκαιρι = μερες_καλοκαιρι * νεα_τιμη_καλοκαιρι
    νεο_εισοδημα_κανονικες = συνολικες_κανονικες * νεα_τιμη_κανονικες

    # Αναμένουμε (ήδη) ότι αθροιστικά θα βγάλει ~ 10.000€
    τελικο_εισοδημα = νεο_εισοδημα_πασχα + νεο_εισοδημα_χριστουγεννα + νεο_εισοδημα_λοιπες_γιορτες + \
                      νεο_εισοδημα_καλοκαιρι + νεο_εισοδημα_κανονικες

    # ----- Εμφάνιση Αποτελεσμάτων ----- #
    st.header("### Νέες Κλιμακωμένες Τιμές για να βγάλεις ακριβώς 10.000€ ανά έτος")

    st.write(f"**Scale Factor:** {scale:.6f} (εσωτερική κλιμάκωση)")
    st.write(f"**Αρχικό Ετήσιο Εισόδημα (με τις αρχικές τιμές):** €{αρχικο_εισοδημα:,.2f}")

    col1, col2 = st.columns(2)
    with col1:
        st.subheader("Νέες Τιμές στις Περιόδους")
        st.write(f"- Πάσχα: {νεα_τιμη_πασχα:,.2f} €/μέρα")
        st.write(f"- Χριστούγεννα: {νεα_τιμη_χριστουγεννα:,.2f} €/μέρα")
        st.write(f"- Άλλες Γιορτές: {νεα_τιμη_λοιπες_γιορτες:,.2f} €/μέρα")
        st.write(f"- Καλοκαίρι: {νεα_τιμη_καλοκαιρι:,.2f} €/μέρα")
        st.write(f"- Κανονικές Περίοδοι: {νεα_τιμη_κανονικες:,.2f} €/μέρα")

    with col2:
        st.subheader("Εισόδημα από κάθε Περίοδο (με τις Νέες Τιμές)")
        st.write(f"- Πάσχα: €{νεο_εισοδημα_πασχα:,.2f}")
        st.write(f"- Χριστούγεννα: €{νεο_εισοδημα_χριστουγεννα:,.2f}")
        st.write(f"- Άλλες Γιορτές: €{νεο_εισοδημα_λοιπες_γιορτες:,.2f}")
        st.write(f"- Καλοκαίρι: €{νεο_εισοδημα_καλοκαιρι:,.2f}")
        st.write(f"- Κανονικές: €{νεο_εισοδημα_κανονικες:,.2f}")

    st.markdown("---")
    st.subheader("Τελικό Συνολικό Εισόδημα")
    st.write(f"**Με τις Νέες Τιμές, το Ετήσιο Εισόδημα είναι: €{τελικο_εισοδημα:,.2f}**")

    st.info("""\
> **Σημείωση:** Λόγω στρογγυλοποιήσεων στους δεκαδικούς, μπορεί να υπάρχει 
> ελάχιστη απόκλιση (π.χ. 9999.99 αντί για 10000). Εσωτερικά όμως τα περισσότερα 
> δεκαδικά διατηρούνται, οπότε το break-even είναι ουσιαστικά 10.000€.
""")

if __name__ == "__main__":
    main()
