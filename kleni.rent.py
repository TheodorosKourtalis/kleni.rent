import streamlit as st

def main():
    # Ρυθμίσεις σελίδας
    st.set_page_config(page_title="Υπολογιστής Ενοικίου για 3 Περίοδους", layout="wide")
    st.title("Υπολογιστής: Πόση πρέπει να είναι η τιμή στην 3η περίοδο για να βγει συνολικά 10.000€;")

    # --------------------------------------------------
    # 1) Ορισμός Στόχου και Περιόδων
    # --------------------------------------------------
    st.sidebar.header("Βασικές Παράμετροι")
    στοχος = st.sidebar.number_input(
        label="Ποιο είναι το συνολικό εισόδημα-στόχος ανά έτος; (€)",
        min_value=1000.0, max_value=100000.0, value=10000.0, step=500.0
    )

    st.sidebar.write("---")
    st.sidebar.header("Περίοδος A")

    μερες_a = st.sidebar.slider("Πόσες μέρες η Περίοδος A;", 0, 180, 30, 1)
    τιμη_a = st.sidebar.slider("Τιμή ενοικίου Περίοδος A (€/μέρα)", 10.0, 1000.0, 100.0, 5.0)

    st.sidebar.write("---")
    st.sidebar.header("Περίοδος B")

    μερες_b = st.sidebar.slider("Πόσες μέρες η Περίοδος B;", 0, 180, 60, 1)
    τιμη_b = st.sidebar.slider("Τιμή ενοικίου Περίοδος B (€/μέρα)", 10.0, 1000.0, 80.0, 5.0)

    st.sidebar.write("---")
    st.sidebar.header("Περίοδος C (Υπολογίζεται Τιμή)")

    μερες_c = st.sidebar.slider("Πόσες μέρες η Περίοδος C;", 0, 365, 275, 1)

    # --------------------------------------------------
    # 2) Υπολογισμοί
    # --------------------------------------------------
    # Εισόδημα από τις πρώτες δύο περιόδους
    εισοδημα_a = μερες_a * τιμη_a
    εισοδημα_b = μερες_b * τιμη_b

    # Πόσα € λείπουν για να πιάσουμε τον στόχο
    # εισόδημα_a + εισόδημα_b + (μερες_c * τιμη_c) = στοχος
    # => τιμη_c = (στοχος - εισοδημα_a - εισοδημα_b) / μερες_c   (αν μερες_c > 0)
    υπολοιπο = στοχος - (εισοδημα_a + εισοδημα_b)

    if μερες_c > 0:
        τιμη_c = υπολοιπο / μερες_c
    else:
        τιμη_c = 0.0  # Αν δεν έχουμε μέρες, δεν υπάρχει ουσιαστικά 3η περίοδος

    # Αν το υπόλοιπο είναι αρνητικό και μερες_c>0, τότε πρακτικά έχουμε καλύψει τον στόχο μόνο από A+B
    # Άρα η τιμή C θα μπορούσε να είναι μηδέν ή ακόμα και αρνητική μαθηματικά, αλλά θα τη θέσουμε στο ελάχιστο 0.
    if τιμη_c < 0:
        τιμη_c = 0.0

    # Τελικό εισόδημα αν βάλουμε την υπολογισμένη τιμή_c
    εισοδημα_c = μερες_c * τιμη_c
    συνολικο_εισοδημα = εισοδημα_a + εισοδημα_b + εισοδημα_c

    # --------------------------------------------------
    # 3) Εμφάνιση Αποτελεσμάτων
    # --------------------------------------------------
    st.header("Αποτελέσματα")

    col1, col2 = st.columns(2)

    with col1:
        st.subheader("Συνολικό Εισόδημα των 3 Περιόδων")
        st.write(f"● Περίοδος A: {μερες_a} μέρες × {τιμη_a:.2f} €/μέρα = **€{εισοδημα_a:,.2f}**")
        st.write(f"● Περίοδος B: {μερες_b} μέρες × {τιμη_b:.2f} €/μέρα = **€{εισοδημα_b:,.2f}**")
        st.write(f"● Περίοδος C: {μερες_c} μέρες × {τιμη_c:.2f} €/μέρα = **€{εισοδημα_c:,.2f}**")
        st.write("---")
        st.write(f"**Συνολικό Ετήσιο Εισόδημα:** €{συνολικο_εισοδημα:,.2f}")

    with col2:
        st.subheader("Υπολογισμένο Ενοίκιο για την 3η Περίοδο")
        if μερες_c == 0:
            st.warning("Δεν υπάρχουν μέρες στην 3η περίοδο. Το ενοίκιο δεν έχει νόημα.")
        else:
            st.write(f"Για να φτάσεις συνολικά τα **€{στοχος:,.2f}**,\n"
                     f"χρειάζεσαι τιμή ενοικίου στην 3η περίοδο = **€{τιμη_c:,.2f}**/μέρα.")

        if υπολοιπο <= 0:
            st.info("Οι πρώτες δύο περίοδοι από μόνες τους υπερκαλύπτουν τον στόχο ή τον φτάνουν. "
                    "Η απαιτούμενη τιμή C μπορεί να είναι 0 €.")
        else:
            st.info("Η τιμή C έχει υπολογιστεί κανονικά βάσει του υπόλοιπου.")

    st.markdown("---")

    # ---- Επεξηγήσεις (χωρίς κώδικα) ----
    st.header("Επεξήγηση Λογικής")
    st.write("""
    Για να βρούμε **πόση πρέπει να είναι η τιμή ενοικίου** στην 3η περίοδο (C), εφαρμόζουμε την εξίσωση:
    
    > Συνολικό Εισόδημα = (Μέρες A × Τιμή A) + (Μέρες B × Τιμή B) + (Μέρες C × Τιμή C)
    
    Θέτουμε το **Συνολικό Εισόδημα** ίσο με τον επιθυμητό στόχο (π.χ. 10.000€) και λύνουμε ως προς **Τιμή C**:
    
    \\[
    \\text{Τιμή C} = 
    \\frac{\\text{Στόχος} - (\\text{Μέρες A} \\times \\text{Τιμή A}) - (\\text{Μέρες B} \\times \\text{Τιμή B})}
          {\\text{Μέρες C}}
    \\]
    """)

    st.markdown("---")
    st.write("**Καλή επιτυχία στην επένδυσή σου!**")

if __name__ == "__main__":
    main()
